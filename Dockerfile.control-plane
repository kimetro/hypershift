FROM registry.ci.openshift.org/ocp/builder:rhel-8-golang-1.17-openshift-4.11 AS builder

WORKDIR /hypershift

COPY . .

RUN make control-plane-operator

FROM registry.ci.openshift.org/ocp/4.11:base
COPY --from=builder /hypershift/bin/control-plane-operator /usr/bin/control-plane-operator

ENTRYPOINT /usr/bin/control-plane-operator

LABEL io.openshift.release.operator=true
LABEL io.openshift.hypershift.control-plane-operator-subcommands=true
